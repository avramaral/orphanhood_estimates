<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Orphanhood in Colombia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="report_stratified_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_stratified_files/libs/quarto-html/quarto.js"></script>
<script src="report_stratified_files/libs/quarto-html/popper.min.js"></script>
<script src="report_stratified_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_stratified_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_stratified_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_stratified_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_stratified_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_stratified_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_stratified_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="report_stratified_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="report_stratified_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="report_stratified_files/libs/datatables-binding-0.31/datatables.js"></script>
<script src="report_stratified_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="report_stratified_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="report_stratified_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="report_stratified_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="report_stratified_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="report_stratified_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="style.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Orphanhood in Colombia</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The 32 departments and one capital district (Bogotá) can be grouped together into the 6 natural regions of Colombia, namely, Pacífico, Caribe, Andina, Orinoquía, Amazónica, and Insular.</p>
<table class="table">
<colgroup>
<col style="width: 27%">
<col style="width: 27%">
<col style="width: 44%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/map1.png" class="img-fluid"></td>
<td><img src="images/map2.png" class="img-fluid"></td>
<td><img src="images/map3.png" class="img-fluid" width="193"></td>
</tr>
</tbody>
</table>
<p>Also, the Colombia municipalities can be categorized the <a href="https://portal.renovacionterritorio.gov.co/Publicaciones/municipios_pdet_subregiones">Programas de Desarrollo con Enfoque Territorial</a>, PDET (left map) or based on a multidimensional poverty index (right map), namely “<em>Medida de pobreza multidimensional de fuente censal en el total del municipio</em> (MPM).”</p>
<p>The PDET includes 170 municipalities that were prioritized as the territories most affected by armed conflict, with higher levels of poverty, presence of illicit economies, and institutional weakness.</p>
<table class="table">
<tbody>
<tr class="odd">
<td><img src="images/map_PDET.jpeg" class="img-fluid"></td>
<td><img src="images/map_MPM.jpeg" class="img-fluid"></td>
</tr>
</tbody>
</table>
<section id="death-and-fertility-rates" class="level3">
<h3 class="anchored" data-anchor-id="death-and-fertility-rates">Death and fertility rates</h3>
<p>The first thing we can analyze is the death and fertility rates in 2021 (averaged over gender and age group). The following plots show the death (left map) and fertility (right map) group by quintile; i.e., ordered.</p>
<p><img src="images/summ_death_fertility_rate_cat.jpeg" class="img-fluid"> From these maps, we can notice that the death rates seem to be lower in the south/east municipalities (poorest places) whilst the fertility rates are higher.</p>
<hr>
<p>We can also analyze these rates grouped by the PDET or MPM classification. The plots below show these estimates for 2021.</p>
<section id="pdet" class="level4">
<h4 class="anchored" data-anchor-id="pdet">PDET</h4>
<p><img src="images/RATES/2021_p_mort_PDET.jpeg" class="img-fluid"> <img src="images/RATES/2021_p_fert_PDET.jpeg" class="img-fluid"></p>
</section>
<section id="mpm-or-poverty-index" class="level4">
<h4 class="anchored" data-anchor-id="mpm-or-poverty-index">MPM (or poverty index)</h4>
<p><img src="images/RATES/2021_p_mort_PVRT.jpeg" class="img-fluid"> <img src="images/RATES/2021_p_fert_PVRT.jpeg" class="img-fluid"></p>
</section>
</section>
<section id="orphanhood-estimates" class="level3">
<h3 class="anchored" data-anchor-id="orphanhood-estimates">Orphanhood estimates</h3>
<p>The following table shows the orphanhood prevalence and incidence estimates in 2021 (“total” and “% of children aged 0-17 years”) at the national, regional, and department levels.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-5d3351128cb8ca8cc9d8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5d3351128cb8ca8cc9d8">{"x":{"filter":"none","vertical":false,"data":[["Colombia",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,"Amazonía",null,null,null,null,null,null,"Caribe",null,null,null,null,null,null,null,null,"Central",null,null,null,null,null,null,null,"Eje cafetero y Antioquia",null,null,null,null,"Llanos",null,null,null,null,"Pacífica",null,null,null,null],[null,null,"Caquetá","Putumayo","Amazonas","Guainía","Guaviare","Vaupés",null,"Atlántico","Bolívar","Cesar","Córdoba","La Guajira","Magdalena","Sucre","Archipelago de San Andrés, Providencia y Santa Catalina",null,"Bogotá","Boyacá","Cundinamarca","Huila","Norte de Santander","Santander","Tolima",null,"Antioquia","Caldas","Quindío","Risaralda",null,"Meta","Arauca","Casanare","Vichada",null,"Cauca","Chocó","Nariño","Valle del Cauca"],[438593,370,6369,4090,814,68,1002,126,79796,24299,16918,13540,18534,7350,13771,7787,370,22346,52571,9774,14477,13457,16934,18223,14431,98435,57676,7689,5184,9655,13705,12639,4629,4420,239,223533,12021,3266,12402,51872],["3.802%","0.117%","5.321%","4.238%","2.707%","0.291%","3.871%","0.612%","2.479%","3.636%","2.827%","3.42%","2.529%","2.072%","3.208%","2.84%","3.442%","0.56%","3.559%","3.472%","2.971%","4.637%","4.285%","3.631%","4.828%","5.36%","4.259%","3.895%","5.077%","5.295%","2.598%","4.518%","5.342%","3.583%","0.63%","13.492%","3.386%","1.717%","3.848%","6.567%"],[69390,109,782,641,188,52,151,52,11073,4667,2883,2362,3501,1442,2474,1327,109,3438,9004,1571,2290,2099,2662,3515,2098,17421,8422,1075,726,1301,1881,1891,584,876,90,35759,1704,563,1805,7024],["0.603%","0.035%","0.655%","0.665%","0.627%","0.223%","0.584%","0.254%","0.345%","0.699%","0.482%","0.598%","0.478%","0.408%","0.577%","0.485%","1.015%","0.088%","0.61%","0.559%","0.471%","0.725%","0.674%","0.702%","0.703%","0.949%","0.623%","0.545%","0.713%","0.714%","0.357%","0.677%","0.675%","0.711%","0.239%","2.16%","0.481%","0.297%","0.561%","0.89%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>Region<\/th>\n      <th>Department<\/th>\n      <th>Prev.<\/th>\n      <th>Prev. (%)<\/th>\n      <th>Incid.<\/th>\n      <th>Incid. (%)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[3,5]},{"name":"Country","targets":0},{"name":"Region","targets":1},{"name":"Department","targets":2},{"name":"Prev.","targets":3},{"name":"Prev. (%)","targets":4},{"name":"Incid.","targets":5},{"name":"Incid. (%)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> These are the orphanhood prevalence estimates in 2021 (total and %) for all departments, stratified by regions.</p>
<p><img src="images/prevalence_2021.jpeg" class="img-fluid"></p>
<p>These are the orphanhood incidence estimates from 2015 to 2021 (for children who lost their mother, father, or both) for all departments, stratified by regions.</p>
<p><img src="images/incidence_rel.jpeg" class="img-fluid"></p>
<p>These are the orphanhood incidence estimates (in %) in 2021 by municipality (per 1,000 children aged 0-17 years).</p>
<p><img src="images/orphans_rate_2021.jpeg" class="img-fluid"></p>
<hr>
<p>As mentioned before, the municipalities can be grouped based on the PDET and MPM classification. The following image shows the distribution of the orphanhood incidence estimates (in %) by municipalities from 2015 to 2021 stratified by gender and PDET or MPM.</p>
<section id="pdet-1" class="level4">
<h4 class="anchored" data-anchor-id="pdet-1">PDET</h4>
<p><img src="images/boxplot_mun_conflict_rel_PDET_2015-2021.jpeg" class="img-fluid"></p>
</section>
<section id="mpm-or-poverty-index-1" class="level4">
<h4 class="anchored" data-anchor-id="mpm-or-poverty-index-1">MPM (or poverty index)</h4>
<p><img src="images/boxplot_mun_conflict_rel_2015-2021.jpeg" class="img-fluid"></p>
<hr>
<p>Complementary, the plots below show the estimated orphanhood incidence in 2021 (in %) for all municipalities (grouped by department) and classified according to the PDET and MPM</p>
<p><img src="images/MUNICIPALITY/orphans_rate_by_mun_Amazonas.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Antioquia.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Arauca.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Archipelago%20de%20San%20Andrés,%20Providencia%20y%20Santa%20Catalina.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Atlántico.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Bogotá.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Bolívar.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Boyacá.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Caldas.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Caquetá.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Casanare.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Cauca.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Cesar.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Chocó.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Córdoba.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Cundinamarca.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Guainía.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Guaviare.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Huila.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_La%20Guajira.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Magdalena.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Meta.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Nariño.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Norte%20de%20Santander.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Putumayo.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Quindío.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Risaralda.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Santander.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Sucre.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Tolima.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Valle%20del%20Cauca.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Vaupés.jpeg" class="img-fluid"> <img src="images/MUNICIPALITY/orphans_rate_by_mun_Vichada.jpeg" class="img-fluid"></p>
</section>
</section>
<section id="raw-data" class="level3">
<h3 class="anchored" data-anchor-id="raw-data">Raw data</h3>
<p>Complementary, the following table shows the orphanhood prevalence and incidence estimates in 2021 (“total” and “% of children aged 0-17 years”) of children who lost their mother, father, or both, at the national, regional, and department levels.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-6b98c8dcbdf7e6f4896c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6b98c8dcbdf7e6f4896c">{"x":{"filter":"none","vertical":false,"data":[["Colombia",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,"Amazonía",null,null,null,null,null,null,"Caribe",null,null,null,null,null,null,null,null,"Central",null,null,null,null,null,null,null,"Eje cafetero y Antioquia",null,null,null,null,"Llanos",null,null,null,null,"Pacífica",null,null,null,null],[null,null,"Caquetá","Putumayo","Amazonas","Guainía","Guaviare","Vaupés",null,"Atlántico","Bolívar","Cesar","Córdoba","La Guajira","Magdalena","Sucre","Archipelago de San Andrés, Providencia y Santa Catalina",null,"Bogotá","Boyacá","Cundinamarca","Huila","Norte de Santander","Santander","Tolima",null,"Antioquia","Caldas","Quindío","Risaralda",null,"Meta","Arauca","Casanare","Vichada",null,"Cauca","Chocó","Nariño","Valle del Cauca"],[438593,370,6369,4090,814,68,1002,126,79796,24299,16918,13540,18534,7350,13771,7787,370,22346,52571,9774,14477,13457,16934,18223,14431,98435,57676,7689,5184,9655,13705,12639,4629,4420,239,223533,12021,3266,12402,51872],["3.802%","0.117%","5.321%","4.238%","2.707%","0.291%","3.871%","0.612%","2.479%","3.636%","2.827%","3.42%","2.529%","2.072%","3.208%","2.84%","3.442%","0.56%","3.559%","3.472%","2.971%","4.637%","4.285%","3.631%","4.828%","5.36%","4.259%","3.895%","5.077%","5.295%","2.598%","4.518%","5.342%","3.583%","0.63%","13.492%","3.386%","1.717%","3.848%","6.567%"],[69390,109,782,641,188,52,151,52,11073,4667,2883,2362,3501,1442,2474,1327,109,3438,9004,1571,2290,2099,2662,3515,2098,17421,8422,1075,726,1301,1881,1891,584,876,90,35759,1704,563,1805,7024],["0.603%","0.035%","0.655%","0.665%","0.627%","0.223%","0.584%","0.254%","0.345%","0.699%","0.482%","0.598%","0.478%","0.408%","0.577%","0.485%","1.015%","0.088%","0.61%","0.559%","0.471%","0.725%","0.674%","0.702%","0.703%","0.949%","0.623%","0.545%","0.713%","0.714%","0.357%","0.677%","0.675%","0.711%","0.239%","2.16%","0.481%","0.297%","0.561%","0.89%"],[106194,19,1472,990,162,32,125,38,17534,6446,4614,3486,4906,2096,3764,2133,19,5610,13904,2400,3707,3395,3680,4559,3420,26324,12336,1726,1115,2165,3356,3199,1098,1157,32,53678,2743,922,3002,10742],["0.921%","0.006%","1.228%","1.026%","0.537%","0.137%","0.483%","0.184%","0.546%","0.965%","0.771%","0.881%","0.669%","0.591%","0.876%","0.778%","0.177%","0.14%","0.942%","0.851%","0.761%","1.171%","0.931%","0.907%","1.144%","1.432%","0.911%","0.875%","1.092%","1.189%","0.637%","1.146%","1.268%","0.936%","0.085%","3.238%","0.773%","0.485%","0.931%","1.359%"],[17796,31,198,162,58,24,37,19,2661,1265,784,643,953,456,703,355,31,926,2362,385,600,569,646,869,516,4790,2062,250,181,309,500,527,139,221,32,9050,387,176,463,1634],["0.155%","0.01%","0.166%","0.168%","0.194%","0.103%","0.143%","0.093%","0.083%","0.19%","0.131%","0.163%","0.13%","0.129%","0.164%","0.13%","0.289%","0.024%","0.16%","0.137%","0.124%","0.197%","0.164%","0.174%","0.173%","0.261%","0.153%","0.127%","0.178%","0.17%","0.095%","0.189%","0.161%","0.18%","0.085%","0.547%","0.11%","0.093%","0.144%","0.207%"],[332399,351,4897,3100,652,36,877,88,62262,17853,12304,10054,13628,5254,10007,5654,351,16736,38667,7374,10770,10062,13254,13664,11011,72111,45340,5963,4069,7490,10349,9440,3531,3263,207,169855,9278,2344,9400,41130],["2.881%","0.111%","4.093%","3.212%","2.17%","0.154%","3.388%","0.428%","1.933%","2.671%","2.056%","2.539%","1.86%","1.481%","2.332%","2.062%","3.265%","0.42%","2.617%","2.621%","2.21%","3.466%","3.354%","2.724%","3.684%","3.928%","3.348%","3.02%","3.985%","4.106%","1.961%","3.372%","4.074%","2.647%","0.545%","10.254%","2.613%","1.232%","2.917%","5.208%"],[51594,78,584,479,130,28,114,33,8412,3402,2099,1719,2548,986,1771,972,78,2512,6642,1186,1690,1530,2016,2646,1582,12631,6360,825,545,992,1381,1364,445,655,58,26709,1317,387,1342,5390],["0.448%","0.025%","0.489%","0.497%","0.433%","0.12%","0.441%","0.161%","0.262%","0.509%","0.351%","0.435%","0.348%","0.279%","0.413%","0.355%","0.726%","0.064%","0.45%","0.422%","0.347%","0.528%","0.51%","0.528%","0.53%","0.688%","0.47%","0.418%","0.535%","0.544%","0.262%","0.488%","0.514%","0.531%","0.154%","1.613%","0.371%","0.204%","0.417%","0.683%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Country<\/th>\n      <th>Region<\/th>\n      <th>Department<\/th>\n      <th>Prev. Both<\/th>\n      <th>Prev. Both (%)<\/th>\n      <th>Incid. Both<\/th>\n      <th>Incid. Both (%)<\/th>\n      <th>Prev. Mother<\/th>\n      <th>Prev. Mother (%)<\/th>\n      <th>Incid. Mother<\/th>\n      <th>Incid. Mother (%)<\/th>\n      <th>Prev. Father<\/th>\n      <th>Prev. Father (%)<\/th>\n      <th>Incid. Father<\/th>\n      <th>Incid. Father (%)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[3,5,7,9,11,13]},{"name":"Country","targets":0},{"name":"Region","targets":1},{"name":"Department","targets":2},{"name":"Prev. Both","targets":3},{"name":"Prev. Both (%)","targets":4},{"name":"Incid. Both","targets":5},{"name":"Incid. Both (%)","targets":6},{"name":"Prev. Mother","targets":7},{"name":"Prev. Mother (%)","targets":8},{"name":"Incid. Mother","targets":9},{"name":"Incid. Mother (%)","targets":10},{"name":"Prev. Father","targets":11},{"name":"Prev. Father (%)","targets":12},{"name":"Incid. Father","targets":13},{"name":"Incid. Father (%)","targets":14}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>